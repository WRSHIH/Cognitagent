# pytest.ini

[pytest]
# 1. 設定測試路徑
# 告訴 pytest 只需要在 'tests' 這個資料夾中尋找測試。
testpaths = tests

# 2. Python 檔案命名規則
# 尋找所有以 'test_' 開頭的 .py 檔案。這是預設值，但明確寫出有助於理解。
python_files = test_*.py

# 3. 函數命名規則
# 在上述檔案中，尋找所有以 'test_' 開頭的函式。
python_functions = test_*

# 4. 類別命名規則
# 在上述檔案中，尋找所有以 'Test' 開頭的類別（並且這些類別不應有 __init__ 方法）。
python_classes = Test*

# 5. 環境變數設定 (與 .env.test 協作的關鍵)
# 在執行所有測試之前，自動設定這些環境變數。
# 這確保了您的應用程式在測試模式下會讀取 '.env.test' 設定檔。
# 注意：這需要 pytest-dotenv 套件的支持。
# 請執行: pip install pytest-dotenv
env_files = .env.test

# 6. 增加命令列輸出的詳細程度
# -v: verbose (詳細) 模式
# -rA: 顯示除了通過 (pass) 以外所有測試的摘要資訊 (失敗、跳過、錯誤等)
addopts = -v -rA

# 7. 註冊自訂標記 (Markers)
# 預先註冊，避免 pytest 跳出警告。
# 例如，你可以用 @pytest.mark.slow 來標記執行時間較長的測試。
markers =
    slow: marks tests as slow to run
    integration: marks integration tests
    unit: marks unit tests